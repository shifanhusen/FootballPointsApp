version: '3.4'

services:
  footballpointsapp:
    image: footballpointsapp
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "5000:8080"
    environment:
      # Use the shared PostgreSQL container on the shared network
      ConnectionStrings__DefaultConnection: "Host=shared-postgres;Port=5432;Database=football_db;Username=postgres;Password=StrongPass123!"
      ASPNETCORE_URLS: "http://+:8080"
      ASPNETCORE_ENVIRONMENT: "Development"
    # Do not depend_on the local db service when using the shared Postgres
    networks:
      - shared-net

  # Local postgres service kept for local development/testing but disabled
  # Remove or comment out this block if you only want to use the shared DB
  # Local postgres service removed â€” this app uses the shared-postgres instance

volumes:
  # No local postgres volume; using shared PostgreSQL on the host
networks:
  shared-net:
    external: true
